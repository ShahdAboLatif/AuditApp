import{c as je,r as R,j as t,L as fe,a as ne,H as Ne}from"./app-rOyHO9Rd.js";import{A as _e}from"./app-layout-INM8-aEI.js";import"./app-KQAryUus.js";import"./app-logo-icon-yZ7-xYF8.js";import"./index-RfzFmWyn.js";import"./index-C2AIlcfF.js";import"./index-BH0NSEIh.js";function Re(r){const e=je.c(91),{auth:H,audits:l,entities:M,stores:oe,groups:ae,filters:I}=r;let U;e[0]!==M?(U=M===void 0?[]:M,e[0]=M,e[1]=U):U=e[1];const o=U,[n,ge]=R.useState(I.date_range_type||"daily"),[c,ue]=R.useState(I.date_from||""),[d,xe]=R.useState(I.date_to||""),[m,pe]=R.useState(I.store_id||""),[f,he]=R.useState(I.group||"");let a,i;e[2]!==n||e[3]!==c||e[4]!==d||e[5]!==f||e[6]!==m?(i=s=>{ge(s),a({date_range_type:s})},a=s=>{const ie=s===void 0?{}:s;ne.get("/camera-forms",{date_range_type:n,date_from:c,date_to:d,store_id:m,group:f,...ie},{preserveState:!0,preserveScroll:!0})},e[2]=n,e[3]=c,e[4]=d,e[5]=f,e[6]=m,e[7]=a,e[8]=i):(a=e[7],i=e[8]);let V;e[9]!==n?(V=()=>{ue(""),xe(""),pe(""),he(""),ne.get("/camera-forms",{date_range_type:n})},e[9]=n,e[10]=V):V=e[10];const ce=V,be=De,ye=Fe,ve=H.user;let W;e[11]===Symbol.for("react.memo_cache_sentinel")?(W=t.jsx(Ne,{title:"Camera Forms"}),e[11]=W):W=e[11];let Z;e[12]===Symbol.for("react.memo_cache_sentinel")?(Z=t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Camera Forms"}),t.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Manage and track camera inspection forms"})]}),t.jsx(fe,{href:"/camera-forms/create",className:"inline-flex items-center justify-center rounded-md bg-primary px-4 py-2 text-sm font-medium text-primary-foreground shadow hover:bg-primary/90 transition-colors",children:"Create New Form"})]}),e[12]=Z):Z=e[12];let u;e[13]!==i?(u=()=>i("daily"),e[13]=i,e[14]=u):u=e[14];const de=`px-6 py-3 text-sm font-medium transition-colors border-b-2 ${n==="daily"?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground"}`;let x;e[15]!==u||e[16]!==de?(x=t.jsx("button",{onClick:u,className:de,children:"Daily"}),e[15]=u,e[16]=de,e[17]=x):x=e[17];let p;e[18]!==i?(p=()=>i("weekly"),e[18]=i,e[19]=p):p=e[19];const me=`px-6 py-3 text-sm font-medium transition-colors border-b-2 ${n==="weekly"?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground"}`;let h;e[20]!==p||e[21]!==me?(h=t.jsx("button",{onClick:p,className:me,children:"Weekly"}),e[20]=p,e[21]=me,e[22]=h):h=e[22];let g;e[23]!==h||e[24]!==x?(g=t.jsx("div",{className:"border-b bg-muted/50",children:t.jsxs("nav",{className:"flex",children:[x,h]})}),e[23]=h,e[24]=x,e[25]=g):g=e[25];let q;e[26]===Symbol.for("react.memo_cache_sentinel")?(q=t.jsx("label",{className:"text-sm font-medium",children:"Date From"}),e[26]=q):q=e[26];let z;e[27]===Symbol.for("react.memo_cache_sentinel")?(z=s=>ue(s.target.value),e[27]=z):z=e[27];let b;e[28]!==c?(b=t.jsxs("div",{className:"space-y-2",children:[q,t.jsx("input",{type:"date",value:c,onChange:z,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"})]}),e[28]=c,e[29]=b):b=e[29];let B;e[30]===Symbol.for("react.memo_cache_sentinel")?(B=t.jsx("label",{className:"text-sm font-medium",children:"Date To"}),e[30]=B):B=e[30];let J;e[31]===Symbol.for("react.memo_cache_sentinel")?(J=s=>xe(s.target.value),e[31]=J):J=e[31];let y;e[32]!==d?(y=t.jsxs("div",{className:"space-y-2",children:[B,t.jsx("input",{type:"date",value:d,onChange:J,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"})]}),e[32]=d,e[33]=y):y=e[33];let K;e[34]===Symbol.for("react.memo_cache_sentinel")?(K=t.jsx("label",{className:"text-sm font-medium",children:"Store"}),e[34]=K):K=e[34];let O;e[35]===Symbol.for("react.memo_cache_sentinel")?(O=s=>pe(s.target.value),e[35]=O):O=e[35];let P;e[36]===Symbol.for("react.memo_cache_sentinel")?(P=t.jsx("option",{value:"",children:"All Stores"}),e[36]=P):P=e[36];let v;e[37]!==oe?(v=oe.map(Ce),e[37]=oe,e[38]=v):v=e[38];let j;e[39]!==m||e[40]!==v?(j=t.jsxs("div",{className:"space-y-2",children:[K,t.jsxs("select",{value:m,onChange:O,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",children:[P,v]})]}),e[39]=m,e[40]=v,e[41]=j):j=e[41];let Q;e[42]===Symbol.for("react.memo_cache_sentinel")?(Q=t.jsx("label",{className:"text-sm font-medium",children:"Group"}),e[42]=Q):Q=e[42];let X;e[43]===Symbol.for("react.memo_cache_sentinel")?(X=s=>he(s.target.value),e[43]=X):X=e[43];let Y;e[44]===Symbol.for("react.memo_cache_sentinel")?(Y=t.jsx("option",{value:"",children:"All Groups"}),e[44]=Y):Y=e[44];let N;e[45]!==ae?(N=ae.map(ke),e[45]=ae,e[46]=N):N=e[46];let _;e[47]!==f||e[48]!==N?(_=t.jsxs("div",{className:"space-y-2",children:[Q,t.jsxs("select",{value:f,onChange:X,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",children:[Y,N]})]}),e[47]=f,e[48]=N,e[49]=_):_=e[49];let w;e[50]!==b||e[51]!==y||e[52]!==j||e[53]!==_?(w=t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[b,y,j,_]}),e[50]=b,e[51]=y,e[52]=j,e[53]=_,e[54]=w):w=e[54];let S;e[55]!==a?(S=t.jsx("button",{onClick:()=>a(),className:"inline-flex items-center justify-center rounded-md bg-primary px-4 py-2 text-sm font-medium text-primary-foreground shadow hover:bg-primary/90",children:"Apply Filters"}),e[55]=a,e[56]=S):S=e[56];let k;e[57]!==ce?(k=t.jsx("button",{onClick:ce,className:"inline-flex items-center justify-center rounded-md border border-input bg-background px-4 py-2 text-sm font-medium hover:bg-accent hover:text-accent-foreground",children:"Reset"}),e[57]=ce,e[58]=k):k=e[58];let C;e[59]!==S||e[60]!==k?(C=t.jsxs("div",{className:"flex gap-2 mt-4",children:[S,k]}),e[59]=S,e[60]=k,e[61]=C):C=e[61];let F;e[62]!==w||e[63]!==C?(F=t.jsxs("div",{className:"p-6 border-b bg-muted/20",children:[w,C]}),e[62]=w,e[63]=C,e[64]=F):F=e[64];let ee,te,re;e[65]===Symbol.for("react.memo_cache_sentinel")?(ee=t.jsx("th",{className:"h-12 px-4 text-left align-middle font-medium text-muted-foreground whitespace-nowrap",children:"Date"}),te=t.jsx("th",{className:"h-12 px-4 text-left align-middle font-medium text-muted-foreground whitespace-nowrap",children:"Store"}),re=t.jsx("th",{className:"h-12 px-4 text-left align-middle font-medium text-muted-foreground whitespace-nowrap",children:"User"}),e[65]=ee,e[66]=te,e[67]=re):(ee=e[65],te=e[66],re=e[67]);let D;e[68]!==o?(D=o.map(Se),e[68]=o,e[69]=D):D=e[69];let se;e[70]===Symbol.for("react.memo_cache_sentinel")?(se=t.jsx("th",{className:"h-12 px-4 text-left align-middle font-medium text-muted-foreground whitespace-nowrap",children:"Actions"}),e[70]=se):se=e[70];let A;e[71]!==D?(A=t.jsx("thead",{className:"border-b",children:t.jsxs("tr",{className:"border-b transition-colors hover:bg-muted/50",children:[ee,te,re,D,se]})}),e[71]=D,e[72]=A):A=e[72];let T;e[73]!==l.data||e[74]!==o?(T=l.data.length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:o.length+4,className:"h-24 text-center text-muted-foreground",children:"No camera forms found."})}):l.data.map(s=>t.jsxs("tr",{className:"border-b transition-colors hover:bg-muted/50",children:[t.jsx("td",{className:"p-4 align-middle whitespace-nowrap",children:new Date(s.date).toLocaleDateString(void 0,{timeZone:"UTC"})}),t.jsx("td",{className:"p-4 align-middle whitespace-nowrap",children:s.store?.store}),t.jsx("td",{className:"p-4 align-middle whitespace-nowrap",children:s.user?.name}),o.map(ie=>t.jsx("td",{className:"p-4 align-middle text-center",children:t.jsx("span",{className:"inline-flex items-center justify-center px-2 py-1 text-xs font-medium rounded-md bg-muted",children:ye(s,ie.id)})},ie.id)),t.jsx("td",{className:"p-4 align-middle whitespace-nowrap",children:t.jsxs("div",{className:"flex gap-2",children:[t.jsx(fe,{href:`/camera-forms/${s.id}`,className:"text-sm font-medium text-accent-foreground hover:underline",children:"View"}),t.jsx(fe,{href:`/camera-forms/${s.id}/edit`,className:"text-sm font-medium text-primary hover:underline",children:"Edit"}),t.jsx("button",{onClick:()=>be(s.id),className:"text-sm font-medium text-destructive hover:underline",children:"Delete"})]})})]},s.id)),e[73]=l.data,e[74]=o,e[75]=T):T=e[75];let $;e[76]!==T?($=t.jsx("tbody",{children:T}),e[76]=T,e[77]=$):$=e[77];let E;e[78]!==A||e[79]!==$?(E=t.jsx("div",{className:"relative w-full overflow-auto",children:t.jsxs("table",{className:"w-full caption-bottom text-sm",children:[A,$]})}),e[78]=A,e[79]=$,e[80]=E):E=e[80];let L;e[81]!==l.links?(L=l.links&&l.links.length>3&&t.jsx("div",{className:"flex items-center justify-center gap-2 p-4 border-t",children:l.links.map(we)}),e[81]=l.links,e[82]=L):L=e[82];let G;e[83]!==g||e[84]!==F||e[85]!==E||e[86]!==L?(G=t.jsxs("div",{className:"flex flex-1 flex-col gap-4 p-4 pt-0",children:[Z,t.jsxs("div",{className:"rounded-lg border bg-card",children:[g,F,E,L]})]}),e[83]=g,e[84]=F,e[85]=E,e[86]=L,e[87]=G):G=e[87];let le;return e[88]!==H.user||e[89]!==G?(le=t.jsxs(_e,{user:ve,children:[W,G]}),e[88]=H.user,e[89]=G,e[90]=le):le=e[90],le}function we(r,e){return t.jsx("button",{onClick:()=>r.url&&ne.visit(r.url),disabled:!r.url,className:`inline-flex items-center justify-center rounded-md px-3 py-1 text-sm font-medium transition-colors ${r.active?"bg-primary text-primary-foreground":"hover:bg-accent hover:text-accent-foreground"} ${r.url?"":"opacity-50 cursor-not-allowed"}`,dangerouslySetInnerHTML:{__html:r.label}},e)}function Se(r){return t.jsx("th",{className:"h-12 px-4 text-center align-middle font-medium text-muted-foreground whitespace-nowrap",title:r.entity_label,children:r.entity_label},r.id)}function ke(r){return t.jsxs("option",{value:r,children:["Group ",r]},r)}function Ce(r){return t.jsx("option",{value:r.id,children:r.store},r.id)}function Fe(r,e){return r.camera_forms?.find(l=>l.entity_id===e)?.rating?.label||"-"}function De(r){confirm("Are you sure you want to delete this camera form?")&&ne.delete(`/camera-forms/${r}`,{preserveScroll:!0})}export{Re as default};
