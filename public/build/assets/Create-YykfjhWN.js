import{c as Be,r as h,j as t,a as He,H as Ie}from"./app-rOyHO9Rd.js";import{A as Oe}from"./app-layout-INM8-aEI.js";import"./app-KQAryUus.js";import"./app-logo-icon-yZ7-xYF8.js";import"./index-RfzFmWyn.js";import"./index-C2AIlcfF.js";import"./index-BH0NSEIh.js";function Xe(s){const e=Be.c(124),{auth:v,entities:G,ratings:J,stores:K}=s;let Q;e[0]!==G?(Q=G===void 0?[]:G,e[0]=G,e[1]=Q):Q=e[1];const _e=Q;let V;e[2]!==J?(V=J===void 0?[]:J,e[2]=J,e[3]=V):V=e[3];const Ne=V;let X;e[4]!==K?(X=K===void 0?[]:K,e[4]=K,e[5]=X):X=e[5];const $=X,[n,Re]=h.useState("daily"),[i,Te]=h.useState("");let Y;e[6]===Symbol.for("react.memo_cache_sentinel")?(Y={},e[6]=Y):Y=e[6];const[y,Ee]=h.useState(Y),[u,Fe]=h.useState(""),[f,Ae]=h.useState(""),[Z,Se]=h.useState(!1);let ee;e[7]===Symbol.for("react.memo_cache_sentinel")?(ee={},e[7]=ee):ee=e[7];const[l,Le]=h.useState(ee);let te;if(e[8]!==n||e[9]!==_e||e[10]!==i){let r;e[12]!==n||e[13]!==i?(r=a=>{const o=a.date_range_type===n,d=!i||a.report_type===i;return o&&d},e[12]=n,e[13]=i,e[14]=r):r=e[14],te=_e.filter(r),e[8]=n,e[9]=_e,e[10]=i,e[11]=te}else te=e[11];const c=te;let se;e[15]!==c?(se=()=>{const r={};c.forEach(a=>{r[a.id]={entity_id:a.id,rating_id:null,note:""}}),Ee(r)},e[15]=c,e[16]=se):se=e[16];let le;e[17]!==n||e[18]!==i?(le=[n,i],e[17]=n,e[18]=i,e[19]=le):le=e[19],h.useEffect(se,le);let ie;e[20]!==f||e[21]!==y||e[22]!==u?(ie=r=>{r.preventDefault(),Se(!0);const a=Object.values(y).filter(Ue);He.post("/camera-forms",{store_id:u,date:f,entities:a},{preserveScroll:!0,onSuccess:()=>{Se(!1)},onError:o=>{Le(o),Se(!1)}})},e[20]=f,e[21]=y,e[22]=u,e[23]=ie):ie=e[23];const ke=ie;let re;e[24]===Symbol.for("react.memo_cache_sentinel")?(re=(r,a,o)=>{Ee(d=>({...d,[r]:{...d[r],[a]:o}}))},e[24]=re):re=e[24];const De=re;let j,_,N,S,k,x,p,C,g,E,b;if(e[25]!==v.user||e[26]!==f||e[27]!==n||e[28]!==y||e[29]!==l.date||e[30]!==l.store_id||e[31]!==c||e[32]!==ke||e[33]!==Ne||e[34]!==i||e[35]!==u||e[36]!==$){const r=c.reduce(Pe,{});j=Oe,E=v.user,e[48]===Symbol.for("react.memo_cache_sentinel")?(b=t.jsx(Ie,{title:"Create Camera Form"}),e[48]=b):b=e[48],C="flex flex-1 flex-col gap-4 p-4 pt-0",e[49]===Symbol.for("react.memo_cache_sentinel")?(g=t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Create Camera Form"}),t.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Fill out the inspection form for camera monitoring"})]}),t.jsx("a",{href:"/camera-forms",className:"text-sm font-medium text-muted-foreground hover:text-foreground",children:"â† Back"})]}),e[49]=g):g=e[49],S=ke,k="space-y-6";let a;e[50]===Symbol.for("react.memo_cache_sentinel")?(a=t.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Filter Entities"}),e[50]=a):a=e[50];let o;e[51]===Symbol.for("react.memo_cache_sentinel")?(o=t.jsx("label",{className:"text-sm font-medium",children:"Date Range Type"}),e[51]=o):o=e[51];let d;e[52]===Symbol.for("react.memo_cache_sentinel")?(d=m=>Re(m.target.value),e[52]=d):d=e[52];let oe,ce;e[53]===Symbol.for("react.memo_cache_sentinel")?(oe=t.jsx("option",{value:"daily",children:"Daily"}),ce=t.jsx("option",{value:"weekly",children:"Weekly"}),e[53]=oe,e[54]=ce):(oe=e[53],ce=e[54]);let A;e[55]!==n?(A=t.jsxs("div",{className:"space-y-2",children:[o,t.jsxs("select",{value:n,onChange:d,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring",children:[oe,ce]})]}),e[55]=n,e[56]=A):A=e[56];let de;e[57]===Symbol.for("react.memo_cache_sentinel")?(de=t.jsx("label",{className:"text-sm font-medium",children:"Report Type"}),e[57]=de):de=e[57];let me;e[58]===Symbol.for("react.memo_cache_sentinel")?(me=m=>Te(m.target.value),e[58]=me):me=e[58];let ue,fe,xe;e[59]===Symbol.for("react.memo_cache_sentinel")?(ue=t.jsx("option",{value:"",children:"All Types"}),fe=t.jsx("option",{value:"main",children:"Main"}),xe=t.jsx("option",{value:"secondary",children:"Secondary"}),e[59]=ue,e[60]=fe,e[61]=xe):(ue=e[59],fe=e[60],xe=e[61]);let L;e[62]!==i?(L=t.jsxs("div",{className:"space-y-2",children:[de,t.jsxs("select",{value:i,onChange:me,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring",children:[ue,fe,xe]})]}),e[62]=i,e[63]=L):L=e[63];let q;e[64]!==A||e[65]!==L?(q=t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[A,L]}),e[64]=A,e[65]=L,e[66]=q):q=e[66];let B;e[67]!==c.length?(B=t.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Showing ",c.length," entities"]}),e[67]=c.length,e[68]=B):B=e[68],e[69]!==q||e[70]!==B?(x=t.jsxs("div",{className:"rounded-lg border bg-accent/50 p-6",children:[a,q,B]}),e[69]=q,e[70]=B,e[71]=x):x=e[71];let pe;e[72]===Symbol.for("react.memo_cache_sentinel")?(pe=t.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Basic Information"}),e[72]=pe):pe=e[72];let ge;e[73]===Symbol.for("react.memo_cache_sentinel")?(ge=t.jsxs("label",{className:"text-sm font-medium",children:["Store ",t.jsx("span",{className:"text-destructive",children:"*"})]}),e[73]=ge):ge=e[73];let be;e[74]===Symbol.for("react.memo_cache_sentinel")?(be=m=>Fe(m.target.value),e[74]=be):be=e[74];let he;e[75]===Symbol.for("react.memo_cache_sentinel")?(he=t.jsx("option",{value:"",children:"Select Store"}),e[75]=he):he=e[75];let H;e[76]!==$?(H=$.map(Me),e[76]=$,e[77]=H):H=e[77];let I;e[78]!==u||e[79]!==H?(I=t.jsxs("select",{value:u,onChange:be,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring",required:!0,children:[he,H]}),e[78]=u,e[79]=H,e[80]=I):I=e[80];let O;e[81]!==l.store_id?(O=l.store_id&&t.jsx("p",{className:"text-sm text-destructive",children:l.store_id}),e[81]=l.store_id,e[82]=O):O=e[82];let z;e[83]!==I||e[84]!==O?(z=t.jsxs("div",{className:"space-y-2",children:[ge,I,O]}),e[83]=I,e[84]=O,e[85]=z):z=e[85];let ve;e[86]===Symbol.for("react.memo_cache_sentinel")?(ve=t.jsxs("label",{className:"text-sm font-medium",children:["Date ",t.jsx("span",{className:"text-destructive",children:"*"})]}),e[86]=ve):ve=e[86];let ye;e[87]===Symbol.for("react.memo_cache_sentinel")?(ye=m=>Ae(m.target.value),e[87]=ye):ye=e[87];let M;e[88]!==f?(M=t.jsx("input",{type:"date",value:f,onChange:ye,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring",required:!0}),e[88]=f,e[89]=M):M=e[89];let P;e[90]!==l.date?(P=l.date&&t.jsx("p",{className:"text-sm text-destructive",children:l.date}),e[90]=l.date,e[91]=P):P=e[91];let U;e[92]!==M||e[93]!==P?(U=t.jsxs("div",{className:"space-y-2",children:[ve,M,P]}),e[92]=M,e[93]=P,e[94]=U):U=e[94],e[95]!==z||e[96]!==U?(p=t.jsxs("div",{className:"rounded-lg border bg-card p-6",children:[pe,t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[z,U]})]}),e[95]=z,e[96]=U,e[97]=p):p=e[97],_="space-y-4",N=Object.entries(r).map(m=>{const[we,qe]=m;return t.jsxs("div",{className:"rounded-lg border bg-card",children:[t.jsx("div",{className:"border-b bg-muted/50 px-6 py-4",children:t.jsx("h3",{className:"text-lg font-semibold",children:we})}),t.jsx("div",{className:"p-6 space-y-4",children:qe.map(W=>t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 p-4 rounded-md bg-muted/20",children:[t.jsx("div",{className:"flex items-center",children:t.jsx("label",{className:"text-sm font-medium",children:W.entity_label})}),t.jsx("div",{className:"space-y-1",children:t.jsxs("select",{value:y[W.id]?.rating_id||"",onChange:je=>De(W.id,"rating_id",je.target.value?Number(je.target.value):null),className:"flex h-9 w-full rounded-md border border-input bg-background px-3 py-1 text-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring",children:[t.jsx("option",{value:"",children:"Select Rating"}),Ne.map(ze)]})}),t.jsx("div",{className:"space-y-1",children:t.jsx("input",{type:"text",placeholder:"Note (optional)",value:y[W.id]?.note||"",onChange:je=>De(W.id,"note",je.target.value),className:"flex h-9 w-full rounded-md border border-input bg-background px-3 py-1 text-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring"})})]},W.id))})]},we)}),e[25]=v.user,e[26]=f,e[27]=n,e[28]=y,e[29]=l.date,e[30]=l.store_id,e[31]=c,e[32]=ke,e[33]=Ne,e[34]=i,e[35]=u,e[36]=$,e[37]=j,e[38]=_,e[39]=N,e[40]=S,e[41]=k,e[42]=x,e[43]=p,e[44]=C,e[45]=g,e[46]=E,e[47]=b}else j=e[37],_=e[38],N=e[39],S=e[40],k=e[41],x=e[42],p=e[43],C=e[44],g=e[45],E=e[46],b=e[47];let D;e[98]!==_||e[99]!==N?(D=t.jsx("div",{className:_,children:N}),e[98]=_,e[99]=N,e[100]=D):D=e[100];let w;e[101]!==l.entities?(w=l.entities&&t.jsx("p",{className:"text-sm text-destructive",children:l.entities}),e[101]=l.entities,e[102]=w):w=e[102];let ae;e[103]===Symbol.for("react.memo_cache_sentinel")?(ae=t.jsx("a",{href:"/camera-forms",className:"inline-flex items-center justify-center rounded-md border border-input bg-background px-4 py-2 text-sm font-medium hover:bg-accent hover:text-accent-foreground",children:"Cancel"}),e[103]=ae):ae=e[103];const Ce=Z?"Creating...":"Create Form";let R;e[104]!==Z||e[105]!==Ce?(R=t.jsxs("div",{className:"flex justify-end gap-3 pt-6 border-t",children:[ae,t.jsx("button",{type:"submit",disabled:Z,className:"inline-flex items-center justify-center rounded-md bg-primary px-4 py-2 text-sm font-medium text-primary-foreground shadow hover:bg-primary/90 disabled:opacity-50",children:Ce})]}),e[104]=Z,e[105]=Ce,e[106]=R):R=e[106];let T;e[107]!==S||e[108]!==k||e[109]!==x||e[110]!==p||e[111]!==D||e[112]!==w||e[113]!==R?(T=t.jsxs("form",{onSubmit:S,className:k,children:[x,p,D,w,R]}),e[107]=S,e[108]=k,e[109]=x,e[110]=p,e[111]=D,e[112]=w,e[113]=R,e[114]=T):T=e[114];let F;e[115]!==C||e[116]!==g||e[117]!==T?(F=t.jsxs("div",{className:C,children:[g,T]}),e[115]=C,e[116]=g,e[117]=T,e[118]=F):F=e[118];let ne;return e[119]!==j||e[120]!==E||e[121]!==b||e[122]!==F?(ne=t.jsxs(j,{user:E,children:[b,F]}),e[119]=j,e[120]=E,e[121]=b,e[122]=F,e[123]=ne):ne=e[123],ne}function ze(s){return t.jsx("option",{value:s.id,children:s.label},s.id)}function Me(s){return t.jsx("option",{value:s.id,children:s.store},s.id)}function Pe(s,e){const v=e.category?.label||"Uncategorized";return s[v]||(s[v]=[]),s[v].push(e),s}function Ue(s){return s.rating_id||s.note}export{Xe as default};
