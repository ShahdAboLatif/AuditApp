import{c as ie,r as _,j as t,a as Z,H as ae}from"./app-rOyHO9Rd.js";import{X as ee,A as de}from"./app-layout-INM8-aEI.js";import{S as te,P as ce}from"./save-BMnTYymw.js";import{S as me,T as ue}from"./trash-2-brF9xrc_.js";import{S as Y}from"./store-Dug9W1tG.js";import"./app-KQAryUus.js";import"./app-logo-icon-yZ7-xYF8.js";import"./index-RfzFmWyn.js";import"./index-C2AIlcfF.js";import"./index-BH0NSEIh.js";function ke(r){const e=ie.c(59),{auth:a,stores:o,groups:B}=r,[u,J]=_.useState(!1),[d,O]=_.useState(null);let w;e[0]===Symbol.for("react.memo_cache_sentinel")?(w={store:"",group:""},e[0]=w):w=e[0];const[l,C]=_.useState(w);let k;e[1]===Symbol.for("react.memo_cache_sentinel")?(k={store:"",group:""},e[1]=k):k=e[1];const[n,S]=_.useState(k);let E;e[2]===Symbol.for("react.memo_cache_sentinel")?(E={},e[2]=E):E=e[2];const[i,c]=_.useState(E);let A;e[3]!==l.group||e[4]!==l.store?(A=s=>{s.preventDefault(),Z.post("/stores",{store:l.store,group:l.group||null},{preserveScroll:!0,onSuccess:()=>{C({store:"",group:""}),J(!1),c({})},onError:m=>{c(m)}})},e[3]=l.group,e[4]=l.store,e[5]=A):A=e[5];const Q=A;let G;e[6]===Symbol.for("react.memo_cache_sentinel")?(G=s=>{O(s.id),S({store:s.store,group:s.group?.toString()||""}),c({})},e[6]=G):G=e[6];const se=G;let D;e[7]!==n||e[8]!==d?(D=s=>{s.preventDefault(),d&&Z.put(`/stores/${d}`,{store:n.store,group:n.group||null},{preserveScroll:!0,onSuccess:()=>{O(null),S({store:"",group:""}),c({})},onError:m=>{c(m)}})},e[7]=n,e[8]=d,e[9]=D):D=e[9];const V=D,re=fe;let F;e[10]===Symbol.for("react.memo_cache_sentinel")?(F=()=>{O(null),S({store:"",group:""}),c({})},e[10]=F):F=e[10];const le=F;let I;e[11]===Symbol.for("react.memo_cache_sentinel")?(I=()=>{J(!1),C({store:"",group:""}),c({})},e[11]=I):I=e[11];const oe=I;o.reduce(pe,{});const ne=a.user;let $;e[12]===Symbol.for("react.memo_cache_sentinel")?($=t.jsx(ae,{title:"Stores Management"}),e[12]=$):$=e[12];let M,P;e[13]===Symbol.for("react.memo_cache_sentinel")?(M=t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Stores Management"}),t.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Manage stores and their group assignments"})]}),P=()=>J(!0),e[13]=M,e[14]=P):(M=e[13],P=e[14]);let T;e[15]===Symbol.for("react.memo_cache_sentinel")?(T=t.jsx(ce,{className:"h-4 w-4"}),e[15]=T):T=e[15];let x;e[16]!==u?(x=t.jsxs("div",{className:"flex items-center justify-between",children:[M,t.jsxs("button",{onClick:P,disabled:u,className:"inline-flex items-center gap-2 justify-center rounded-md bg-primary px-4 py-2 text-sm font-medium text-primary-foreground shadow hover:bg-primary/90 transition-colors disabled:opacity-50",children:[T,"Add Store"]})]}),e[16]=u,e[17]=x):x=e[17];let H,R;e[18]===Symbol.for("react.memo_cache_sentinel")?(H=t.jsx("div",{className:"rounded-full bg-primary/10 p-3",children:t.jsx(Y,{className:"h-5 w-5 text-primary"})}),R=t.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Total Stores"}),e[18]=H,e[19]=R):(H=e[18],R=e[19]);let p;e[20]!==o.length?(p=t.jsx("div",{className:"rounded-lg border bg-card p-6",children:t.jsxs("div",{className:"flex items-center gap-3",children:[H,t.jsxs("div",{children:[R,t.jsx("p",{className:"text-2xl font-bold",children:o.length})]})]})}),e[20]=o.length,e[21]=p):p=e[21];let q,K;e[22]===Symbol.for("react.memo_cache_sentinel")?(q=t.jsx("div",{className:"rounded-full bg-accent/50 p-3",children:t.jsx(Y,{className:"h-5 w-5 text-accent-foreground"})}),K=t.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Groups"}),e[22]=q,e[23]=K):(q=e[22],K=e[23]);let f;e[24]!==B.length?(f=t.jsx("div",{className:"rounded-lg border bg-card p-6",children:t.jsxs("div",{className:"flex items-center gap-3",children:[q,t.jsxs("div",{children:[K,t.jsx("p",{className:"text-2xl font-bold",children:B.length})]})]})}),e[24]=B.length,e[25]=f):f=e[25];let L,U;e[26]===Symbol.for("react.memo_cache_sentinel")?(L=t.jsx("div",{className:"rounded-full bg-muted p-3",children:t.jsx(Y,{className:"h-5 w-5 text-muted-foreground"})}),U=t.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Without Group"}),e[26]=L,e[27]=U):(L=e[26],U=e[27]);let g;e[28]!==o?(g=o.filter(xe),e[28]=o,e[29]=g):g=e[29];let h;e[30]!==g.length?(h=t.jsx("div",{className:"rounded-lg border bg-card p-6",children:t.jsxs("div",{className:"flex items-center gap-3",children:[L,t.jsxs("div",{children:[U,t.jsx("p",{className:"text-2xl font-bold",children:g.length})]})]})}),e[30]=g.length,e[31]=h):h=e[31];let b;e[32]!==p||e[33]!==f||e[34]!==h?(b=t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[p,f,h]}),e[32]=p,e[33]=f,e[34]=h,e[35]=b):b=e[35];let W;e[36]===Symbol.for("react.memo_cache_sentinel")?(W=t.jsx("div",{className:"bg-muted/50 px-6 py-4 border-b",children:t.jsx("h3",{className:"text-lg font-semibold",children:"All Stores"})}),e[36]=W):W=e[36];let X;e[37]===Symbol.for("react.memo_cache_sentinel")?(X=t.jsx("thead",{className:"border-b",children:t.jsxs("tr",{className:"border-b transition-colors hover:bg-muted/50",children:[t.jsx("th",{className:"h-12 px-6 text-left align-middle font-medium text-muted-foreground",children:"Store Name"}),t.jsx("th",{className:"h-12 px-6 text-left align-middle font-medium text-muted-foreground",children:"Group"}),t.jsx("th",{className:"h-12 px-6 text-right align-middle font-medium text-muted-foreground",children:"Actions"})]})}),e[37]=X):X=e[37];let j;e[38]!==i||e[39]!==Q||e[40]!==u||e[41]!==l?(j=u&&t.jsxs("tr",{className:"border-b bg-accent/5",children:[t.jsxs("td",{className:"p-4",children:[t.jsx("input",{type:"text",placeholder:"Store name",value:l.store,onChange:s=>C({...l,store:s.target.value}),className:"flex h-9 w-full rounded-md border border-input bg-background px-3 py-1 text-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring",autoFocus:!0}),i.store&&t.jsx("p",{className:"text-xs text-destructive mt-1",children:i.store})]}),t.jsx("td",{className:"p-4",children:t.jsx("input",{type:"number",placeholder:"Group (optional)",value:l.group,onChange:s=>C({...l,group:s.target.value}),className:"flex h-9 w-full rounded-md border border-input bg-background px-3 py-1 text-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring",min:"1"})}),t.jsx("td",{className:"p-4 text-right",children:t.jsxs("div",{className:"flex justify-end gap-2",children:[t.jsxs("button",{onClick:Q,className:"inline-flex items-center gap-1 px-3 py-1.5 text-xs font-medium rounded-md bg-primary text-primary-foreground hover:bg-primary/90",children:[t.jsx(te,{className:"h-3 w-3"}),"Save"]}),t.jsxs("button",{onClick:oe,className:"inline-flex items-center gap-1 px-3 py-1.5 text-xs font-medium rounded-md border hover:bg-accent",children:[t.jsx(ee,{className:"h-3 w-3"}),"Cancel"]})]})})]}),e[38]=i,e[39]=Q,e[40]=u,e[41]=l,e[42]=j):j=e[42];let N;e[43]!==n||e[44]!==d||e[45]!==i||e[46]!==V||e[47]!==o?(N=o.length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:3,className:"h-24 text-center text-muted-foreground",children:'No stores found. Click "Add Store" to create one.'})}):o.map(s=>t.jsx("tr",{className:"border-b transition-colors hover:bg-muted/50",children:d===s.id?t.jsxs(t.Fragment,{children:[t.jsxs("td",{className:"p-4",children:[t.jsx("input",{type:"text",value:n.store,onChange:m=>S({...n,store:m.target.value}),className:"flex h-9 w-full rounded-md border border-input bg-background px-3 py-1 text-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring"}),i.store&&t.jsx("p",{className:"text-xs text-destructive mt-1",children:i.store})]}),t.jsx("td",{className:"p-4",children:t.jsx("input",{type:"number",value:n.group,onChange:m=>S({...n,group:m.target.value}),className:"flex h-9 w-full rounded-md border border-input bg-background px-3 py-1 text-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring",min:"1"})}),t.jsx("td",{className:"p-4 text-right",children:t.jsxs("div",{className:"flex justify-end gap-2",children:[t.jsxs("button",{onClick:V,className:"inline-flex items-center gap-1 px-3 py-1.5 text-xs font-medium rounded-md bg-primary text-primary-foreground hover:bg-primary/90",children:[t.jsx(te,{className:"h-3 w-3"}),"Save"]}),t.jsxs("button",{onClick:le,className:"inline-flex items-center gap-1 px-3 py-1.5 text-xs font-medium rounded-md border hover:bg-accent",children:[t.jsx(ee,{className:"h-3 w-3"}),"Cancel"]})]})})]}):t.jsxs(t.Fragment,{children:[t.jsx("td",{className:"p-4 font-medium",children:s.store}),t.jsx("td",{className:"p-4",children:s.group?t.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-primary/10 text-primary",children:["Group ",s.group]}):t.jsx("span",{className:"text-muted-foreground text-xs",children:"No group"})}),t.jsx("td",{className:"p-4 text-right",children:t.jsxs("div",{className:"flex justify-end gap-2",children:[t.jsxs("button",{onClick:()=>se(s),className:"inline-flex items-center gap-1 px-3 py-1.5 text-xs font-medium rounded-md text-primary hover:bg-primary/10",children:[t.jsx(me,{className:"h-3 w-3"}),"Edit"]}),t.jsxs("button",{onClick:()=>re(s.id,s.store),className:"inline-flex items-center gap-1 px-3 py-1.5 text-xs font-medium rounded-md text-destructive hover:bg-destructive/10",children:[t.jsx(ue,{className:"h-3 w-3"}),"Delete"]})]})})]})},s.id)),e[43]=n,e[44]=d,e[45]=i,e[46]=V,e[47]=o,e[48]=N):N=e[48];let v;e[49]!==j||e[50]!==N?(v=t.jsxs("div",{className:"rounded-lg border bg-card",children:[W,t.jsx("div",{className:"overflow-auto",children:t.jsxs("table",{className:"w-full caption-bottom text-sm",children:[X,t.jsxs("tbody",{children:[j,N]})]})})]}),e[49]=j,e[50]=N,e[51]=v):v=e[51];let y;e[52]!==x||e[53]!==b||e[54]!==v?(y=t.jsxs("div",{className:"flex flex-1 flex-col gap-6 p-4 pt-0",children:[x,b,v]}),e[52]=x,e[53]=b,e[54]=v,e[55]=y):y=e[55];let z;return e[56]!==a.user||e[57]!==y?(z=t.jsxs(de,{user:ne,children:[$,y]}),e[56]=a.user,e[57]=y,e[58]=z):z=e[58],z}function xe(r){return!r.group}function pe(r,e){const a=e.group?.toString()||"No Group";return r[a]||(r[a]=[]),r[a].push(e),r}function fe(r,e){confirm(`Are you sure you want to delete "${e}"?`)&&Z.delete(`/stores/${r}`,{preserveScroll:!0,onError:ge})}function ge(r){alert(r.error||"Failed to delete store")}export{ke as default};
